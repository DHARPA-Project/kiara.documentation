
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="How to create your own kiara module -- the basics.">
      
      
        <meta name="author" content="Markus Binsteiner">
      
      
      
        <link rel="prev" href="../../../usage/getting_started/">
      
      
        <link rel="next" href="../../../workflows/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.5">
    
    
      
        <title>The basics - kiara.documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#writing-your-own-kiara-module-the-basics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="kiara.documentation" class="md-header__button md-logo" aria-label="kiara.documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            kiara.documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              The basics
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DHARPA-Project/kiara.documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="kiara.documentation" class="md-nav__button md-logo" aria-label="kiara.documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    kiara.documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DHARPA-Project/kiara.documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../usage/">Usage</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/getting_started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" tabindex="0" aria-expanded="true">
          Extending kiara
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extending kiara" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Extending kiara
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Creating modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Creating modules
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    Preparation
  </a>
  
    <nav class="md-nav" aria-label="Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-out-the-kiara-getting-started-guide" class="md-nav__link">
    Check out the 'kiara getting started guide'
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-development-environment" class="md-nav__link">
    Setting up development environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-kiara-plugin-project" class="md-nav__link">
    Creating a kiara plugin project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-loading-a-table-dataset" class="md-nav__link">
    Pre-loading a table dataset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-kiara-module" class="md-nav__link">
    Writing the kiara module
  </a>
  
    <nav class="md-nav" aria-label="Writing the kiara module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#module-skeleton" class="md-nav__link">
    Module skeleton
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module-id-and-description" class="md-nav__link">
    Module id and description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inputoutput-field-documentation" class="md-nav__link">
    Input/output field documentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processing-the-inputs" class="md-nav__link">
    Processing the inputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_2" tabindex="0" aria-expanded="false">
          Pipelines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Pipelines" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Pipelines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipelines/assemble_pipelines" class="md-nav__link">
        Assemble a pipeline
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../workflows/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    Preparation
  </a>
  
    <nav class="md-nav" aria-label="Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-out-the-kiara-getting-started-guide" class="md-nav__link">
    Check out the 'kiara getting started guide'
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-development-environment" class="md-nav__link">
    Setting up development environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-kiara-plugin-project" class="md-nav__link">
    Creating a kiara plugin project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-loading-a-table-dataset" class="md-nav__link">
    Pre-loading a table dataset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-kiara-module" class="md-nav__link">
    Writing the kiara module
  </a>
  
    <nav class="md-nav" aria-label="Writing the kiara module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#module-skeleton" class="md-nav__link">
    Module skeleton
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module-id-and-description" class="md-nav__link">
    Module id and description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inputoutput-field-documentation" class="md-nav__link">
    Input/output field documentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processing-the-inputs" class="md-nav__link">
    Processing the inputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="writing-your-own-kiara-module-the-basics">Writing your own <em>kiara</em> module - the basics<a class="headerlink" href="#writing-your-own-kiara-module-the-basics" title="Permanent link">&para;</a></h1>
<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h2>
<h3 id="check-out-the-kiara-getting-started-guide">Check out the '<em>kiara</em> getting started guide'<a class="headerlink" href="#check-out-the-kiara-getting-started-guide" title="Permanent link">&para;</a></h3>
<p>If you haven't already, it would make sense for you to go through the <a href="../../../usage/getting_started/"><em>kiara</em> getting started guide</a>. This will give you a good overview of the relevant <em>kiara</em> features, and how the module(s) you are going to write fits in.</p>
<h3 id="setting-up-development-environment">Setting up development environment<a class="headerlink" href="#setting-up-development-environment" title="Permanent link">&para;</a></h3>
<p>To get going, we need a Python virtual environment in which to develop. We'll be using conda for that here, but this will work for normal virtual environments as well. As a first step, install <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html">conda</a> (if you haven't already). Then:</p>
<div class="highlight"><pre><span></span><code>conda create -n my_kiara_module python=3.9
conda activate my_kiara_module
conda install -c conda-forge mamba   # this is optional, but makes everything install related much faster, if you don&#39;t use it, replace &#39;mamba&#39; with &#39;conda&#39; below
mamba install -c conda-forge -c dharpa kiara kiara_plugin.core_types kiara_plugin.tabular
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Linux, if you experience errors, you might or  might not have to also execute: <code>mamba update -c conda-forge libstdcxx-ng</code>.</p>
</div>
<p>After this, the <code>kiara</code> command-line application should be available to you, you can test whether that works, for example via <code>kiara operation list</code>.</p>
<h3 id="creating-a-kiara-plugin-project">Creating a <em>kiara</em> plugin project<a class="headerlink" href="#creating-a-kiara-plugin-project" title="Permanent link">&para;</a></h3>
<p>For this tutorial, we'll use a <a href="https://github.com/DHARPA-Project/kiara_plugin.develop/tree/main/kiara_plugin.%7B%7B%20cookiecutter.project_slug%20%7D%7D">project template</a> to create a bare-bones kiara plugin project, which we will augment with our own module(s).</p>
<p>First we need to install the <code>cruft</code> conda package, which we will use to create our project stub:</p>
<div class="highlight"><pre><span></span><code>mamba install -c conda-forge cruft
</code></pre></div>
<p>Now, we run <code>cruft</code> against our template git repo, feel free to change any of the answers to the questions you'll be asked:</p>
<div class="highlight"><pre><span></span><code>cruft create https://github.com/DHARPA-Project/kiara_plugin.develop.git

full_name []: Markus Binsteiner
email []: markus@frkl.io
project_name [my-kiara-plugin]: my-kiara-module
project_slug [my_kiara_module]: my_kiara_module
project_short_description [my-kiara-module]: A kiara plugin project for learning to create kiara modules.
github_user [DHARPA-Project]:
anaconda_user [dharpa]:
</code></pre></div>
<p>This should have created a new folder, named <code>kiara_plugin.my_kiara_module</code>. Next, we initialize and install the new plugin Python project into our conda environment:</p>
<div class="highlight"><pre><span></span><code>cd kiara_plugin.my_kiara_module
git init
git checkout -b develop
pip install -e .
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>TODO: explain what happened here?</p>
</div>
<p>Once this is done, you should see a new operation called <code>my_kiara_module.example</code>:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>operation<span class="w"> </span>list<span class="w"> </span>example
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Filtered operations ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   Id                        Type(s)   Description                                                                                        │
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │
│   my_kiara_module.example             A very simple example module; concatenate two strings.                                             │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>example</code> string token at the end of the above command filters the output to operations that match the token.</p>
</div>
<p>This module comes as example code with the project template, and is located in the <code>modules/__init__.py</code> Python file. It only serves as an example and blueprint for your own modules, and you can delete the module class within the file if you wish.</p>
<h3 id="pre-loading-a-table-dataset">Pre-loading a table dataset<a class="headerlink" href="#pre-loading-a-table-dataset" title="Permanent link">&para;</a></h3>
<p>In our tutorial we'll create a module to filter a table. In order to do this we'll need to pre-seed our <em>kiara</em> data store with a tabular dataset. Here is the command to run (with the project root as our working directory):</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>run<span class="w"> </span>--save<span class="w"> </span><span class="nv">table</span><span class="o">=</span>journal_nodes_table<span class="w"> </span>import.table.from.local_file_path<span class="w"> </span><span class="nv">path</span><span class="o">=</span>examples/data/journals/JournalNodes1902.csv
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Results ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                                                                                                                              │
│   field           data_type   value                                                                                                                                                                                                          │
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │
│   imported_file   file        ﻿Id,Label,JournalType,City,CountryNetworkTime,PresentDayCountry,Latitude,Longitude,Language                                                                                                                    │
│                               75,Psychiatrische en neurologische bladen,specialized: psychiatry and neurology,Amsterdam,Netherlands,Netherlands,52.366667,4.9,Dutch                                                                          │
│                               36,The American Journal of Insanity,specialized: psychiatry and neurology,Baltimore,United States,United States,39.289444,-76.615278,English                                                                   │
│                               208,The American Journal of Psychology,specialized: psychology,Baltimore,United States,United States,39.289444,-76.615278,English                                                                              │
│                               295,Die Krankenpflege,specialized: therapy,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                                    │
│                               296,Die deutsche Klinik am Eingange des zwanzigsten Jahrhunderts,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                                                                             │
│                               300,Therapeutische Monatshefte,specialized: therapy,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                           │
│                               1,Allgemeine Zeitschrift für Psychiatrie,specialized: psychiatry and neurology,Berlin,German Empire,Germany,52.52,13.405,German                                                                                │
│                               7,Archiv für Psychiatrie und Nervenkrankheiten,specialized: psychiatry and neurology,Berlin,German Empire,Germany,52.52,13.405,German                                                                          │
│                               10,Berliner klinische Wochenschrift,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                          │
│                               13,Charité Annalen,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                                           │
│                               21,Monatsschrift für Psychiatrie und Neurologie,specialized: psychiatry and neurology,Berlin,German Empire,Germany,52.52,13.405,German                                                                         │
│                               29,Virchows Archiv,&quot;specialized: anatomy, physiology and pathology&quot;,Berlin,German Empire,Germany,52.52,13.405,German                                                                                           │
│                               31,Zeitschrift für pädagogische Psychologie und Pathologie,specialized: psychology and pedagogy,Berlin,German Empire,Germany,52.52,13.405,German                                                               │
│                               42,Vierteljahrsschrift für gerichtliche Medizin und öffentliches Sanitätswesen,&quot;specialized: anthropology, criminology and forensics&quot;,Berlin,German Empire,Germany,52.52,13.405,German                         │
│                               47,Centralblatt für Nervenheilkunde und Psychiatrie,specialized: psychiatry and neurology,Berlin,German Empire,Germany,52.52,13.405,German                                                                     │
│                               50,Russische medicinische Rundschau,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                          │
│                               76,Deutsche Aerzte-Zeitung,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                                   │
│                               87,Monatsschrift für Geburtshülfe und Gynäkologie,specialized: gynecology,Berlin,German Empire,Germany,52.52,13.405,German                                                                                     │
│                               108,Archiv für klinische Chirurgie,specialized: surgery,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                       │
│                               113,Zeitschrift für klinische Medicin,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                        │
│                               159,Deutsche militärärztliche Zeitschrift,specialized: military medicine,Berlin,German Empire,Germany,52.52,13.405,German                                                                                      │
│                               162,Jahresbericht über die Leistungen und Fortschritte auf dem Gebiete der Neurologie und Psychiatrie,specialized: psychiatry and neurology,Berlin,German Empire,Germany,52.52,13.405,German                   │
│                               192,Ärztliche Sachverständigen-Zeitung,general medicine,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                       │
│                               198,Zeitschrift für die Behandlung Schwachsinniger und Epileptischer,specialized: psychiatry and neurology,Berlin,German Empire,Germany,52.52,13.405,German                                                    │
│                               258,Der Pfarrbote,news media,Berlin,German Empire,Germany,52.52,13.405,German                                                                                                                                  │
│                               71,Correspondenz-Blatt für Schweizer Aerzte,general medicine,Bern,Switzerland,Switzerland,46.948056,7.4475,German                                                                                              │
│                               6,Archiv für mikroskopische Anatomie,&quot;specialized: anatomy, physiology and pathology&quot;,Bonn,German Empire,Germany,50.733333,7.1,German                                                                          │
│                               203,The Journal of Abnormal Psychology,specialized: psychology,Boston,United States,United States,42.358056,-71.063611,English                                                                                 │
│                               273,&quot;Correspondenz-Blatt der Deutschen Gesellschaft für Anthropologie, Ethnologie und Urgeschichte&quot;,&quot;specialized: anthropology, criminology and forensics&quot;,Braunschweig,German                                 │
│                               Empire,Germany,52.266667,10.516667,German                                                                                                                                                                      │
│                               303,Policlinique de Bruxelles,general medicine,Brussels,Belgium,Belgium,50.85,4.35,French                                                                                                                      │
│                               306,Annales de la Société Belge de Neurologie,specialized: psychiatry and neurology,Brussels,Belgium,Belgium,50.85,4.35,French                                                                                 │
│                               19,Journal de neurologie,specialized: psychiatry and neurology,Brussels,Belgium,Belgium,50.85,4.35,French                                                                                                      │
│                               25,&quot;Revue internationale d&#39;électrothérapie, de physiologie, de médecine, de chirurgie, d&#39;obstétrique, de thérapeutique, de chimie et de pharmacie&quot;,general                                                     │
│                               medicine,Brussels,Belgium,Belgium,50.85,4.35,French                                                                                                                                                            │
│                               35,Bulletin de la Société de Médecine Mentale de Belgique,specialized: psychiatry and neurology,Brussels,Belgium,Belgium,50.85,4.35,French                                                                     │
│                               ...                                                                                                                                                                                                            │
│                                                                                                                                                                                                                                              │
│                               ...                                                                                                                                                                                                            │
│   table           table                                                                                                                                                                                                                      │
│                                 Id    Label                                              JournalType                                         City        CountryNetworkTime        PresentDayCountry   Latitude    Longitude    Language     │
│                                ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────    │
│                                 75    Psychiatrische en neurologische bladen             specialized: psychiatry and neurology               Amsterdam   Netherlands               Netherlands         52.366667   4.9          Dutch        │
│                                 36    The American Journal of Insanity                   specialized: psychiatry and neurology               Baltimore   United States             United States       39.289444   -76.615278   English      │
│                                 208   The American Journal of Psychology                 specialized: psychology                             Baltimore   United States             United States       39.289444   -76.615278   English      │
│                                 295   Die Krankenpflege                                  specialized: therapy                                Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 296   Die deutsche Klinik am Eingange des zwanzigsten    general medicine                                    Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 300   Therapeutische Monatshefte                         specialized: therapy                                Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 1     Allgemeine Zeitschrift für Psychiatrie             specialized: psychiatry and neurology               Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 7     Archiv für Psychiatrie und Nervenkrankheiten       specialized: psychiatry and neurology               Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 10    Berliner klinische Wochenschrift                   general medicine                                    Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 13    Charité Annalen                                    general medicine                                    Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 21    Monatsschrift für Psychiatrie und Neurologie       specialized: psychiatry and neurology               Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 29    Virchows Archiv                                    specialized: anatomy, physiology and pathology      Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 31    Zeitschrift für pädagogische Psychologie und Pat   specialized: psychology and pedagogy                Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 42    Vierteljahrsschrift für gerichtliche Medizin und   specialized: anthropology, criminology and forens   Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 47    Centralblatt für Nervenheilkunde und Psychiatrie   specialized: psychiatry and neurology               Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 50    Russische medicinische Rundschau                   general medicine                                    Berlin      German Empire             Germany             52.52       13.405       German       │
│                                 ...   ...                                                ...                                                 ...         ...                       ...                 ...         ...          ...          │
│                                 ...   ...                                                ...                                                 ...         ...                       ...                 ...         ...          ...          │
│                                 277   L&#39;arte medica                                      general medicine                                    Turin       Italy                     Italy               45.079167   7.676111     Italian      │
│                                 288   Allgemeine österreichische Gerichts-Zeitung        specialized: anthropology, criminology and forens   Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 18    Jahrbücher für Psychiatrie                         specialized: psychiatry and neurology               Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 30    Wiener klinische Rundschau                         general medicine                                    Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 44    Wiener klinische Wochenschrift                     general medicine                                    Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 45    Wiener medizinische Wochenschrift                  general medicine                                    Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 72    Wiener medizinische Presse                         general medicine                                    Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 81    Monatsschrift für Gesundheitspflege                general medicine                                    Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 93    Klinisch-therapeutische Wochenschrift              general medicine                                    Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 151   Medicinisch-chirurgisches Centralblatt             specialized: surgery                                Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 199   Der Militärazt                                     specialized: military medicine                      Vienna      Austro-Hungarian Empire   Austria             48.2        16.366667    German       │
│                                 261   Медицинская беседа                                 general medicine                                    Voronezh    Russian Empire            Russia              51.671667   39.210556    Russian      │
│                                 77    Medycyna                                           general medicine                                    Warsaw      Russian Empire            Poland              52.233333   21.016667    Polish       │
│                                 150   Kronika Lekarska                                   general medicine                                    Warsaw      Russian Empire            Poland              52.233333   21.016667    Polish       │
│                                 86    Grenzfragen des Nerven- und Seelenlebens           specialized: psychiatry and neurology               Wiesbaden   German Empire             Germany             50.0825     8.24         German       │
│                                 206   Ergebnisse der Allgemeinen Pathologie und Pathol   specialized: anatomy, physiology and pathology      Wiesbaden   German Empire             Germany             50.0825     8.24         German       │
│                                                                                                                                                                                                                                              │
│                                                                                                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

╭─ Stored result value ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                                                                                                                              │
│   field   data type   stored id                              alias(es)                                                                                                                                                                       │
│  ────────────────────────────────────────────────────────────────────────────────                                                                                                                                                            │
│   table   table       b2948129-2aa5-4e49-af0e-8ca9b79427a7   journal_nodes_table                                                                                                                                                             │
│                                                                                                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>This should have created an item with alias <code>journal_nodes_table</code> in the <em>kiara</em> data store, which you can confirm with <code>kiara data list</code>.</p>
<h2 id="writing-the-kiara-module">Writing the <em>kiara</em> module<a class="headerlink" href="#writing-the-kiara-module" title="Permanent link">&para;</a></h2>
<p>Ok, let's get started and create a <em>kiara</em> module that filters a table, using different filter criteria.</p>
<h3 id="module-skeleton">Module skeleton<a class="headerlink" href="#module-skeleton" title="Permanent link">&para;</a></h3>
<p>In most cases you'd delete the example module mentioned above, and create your module in the Python file where the example module was, or in a new Python file in the "modules" folder. For the purpose of this tutorial, we can just leave the example module in place, because it can serve as a quick reference for our own module. Use the editor of your choice, and paste the following text below the existing code into <code>modules/__init__.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">KiaraModule</span>

<span class="k">class</span> <span class="nc">TutorialModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">create_inputs_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;table_input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;table&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">create_outputs_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;table_output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;table&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div>
<p>This module skeleton describes a <em>kiara</em> module that takes a dataset of type <code>table</code> as input (using <code>table_input</code> as input field name), and produces another table dataset as output (accordingly, using <code>table_output</code> as output field name). For your own modules, you'd probably use the field name <code>table</code> for both input and outputs, but in this tutorial we'll use the longer forms, to avoid any confusion.</p>
<p>On the next <em>kiara</em> run, the new module should be picked up by the <code>operation list</code> command:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>operation<span class="w"> </span>list<span class="w"> </span>tutorial_module
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Filtered operations ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   Id                                                             Type(s)   Description                                                   │
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │
│   kiara_plugin.my_kiara_module.my_kiara_module.tutorial_module             -- n/a --                                                     │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>The id of the module was autogenerated from the full Python path of its class: <code>kiara_plugin.my_kiara_module.my_kiara_module.tutorial_module</code>.</p>
<h3 id="module-id-and-description">Module id and description<a class="headerlink" href="#module-id-and-description" title="Permanent link">&para;</a></h3>
<p>In most cases, we don't want such a long and unwieldy module name. We can assign our own, custom and meaningful id by setting the <code>_module_type_name</code> class attribute. In addition, we will want to add some documentation about the module and its functionality that is displayed to the user. For this, we use a normal Python doc string on the Python class body. For the purpose of this tutorial, we'll only add a single sentence, but in most cases you'll want to have a multi-paragraph markdown text here. So, taking all that into account, edit the module code to include:</p>
<div class="highlight"><pre><span></span><code><span class="o">...</span>
<span class="o">...</span>
<span class="k">class</span> <span class="nc">TutorialModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Filter a table.&quot;&quot;&quot;</span>

    <span class="n">_module_type_name</span> <span class="o">=</span> <span class="s2">&quot;filter.table&quot;</span>

    <span class="k">def</span> <span class="nf">create_inputs_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
<span class="o">...</span>
<span class="o">...</span>
</code></pre></div>
<p>The output for our new module in the operation list is much prettier now:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>operation<span class="w"> </span>list<span class="w"> </span>filter
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Filtered operations ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   Id                            Type(s)   Description                                                                                    │
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │
│   filter.table                            Filter a table.                                                                                │
│   string_filter.tokens          filter    -- n/a --                                                                                      │
│   table_filter.drop_columns     filter    -- n/a --                                                                                      │
│   table_filter.select_columns   filter    -- n/a --                                                                                      │
│   table_filter.select_rows      filter    -- n/a --                                                                                      │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>We can also let <em>kiara</em> tell us about what it knows about the operation itself:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>operation<span class="w"> </span>explain<span class="w"> </span>filter.table
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Operation: filter.table ────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   Documentation   Filter a table.                                                                                                        │
│                                                                                                                                          │
│   Inputs                                                                                                                                 │
│                     field name    type    description                                                    Required   Default              │
│                    ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────    │
│                     table_input   table   -- n/a --                                                      yes        -- no default --     │
│                                                                                                                                          │
│                                                                                                                                          │
│   Outputs                                                                                                                                │
│                     field name     type    description                                                                                   │
│                    ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────    │
│                     table_output   table   -- n/a --                                                                                     │
│                                                                                                                                          │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<h3 id="inputoutput-field-documentation">Input/output field documentation<a class="headerlink" href="#inputoutput-field-documentation" title="Permanent link">&para;</a></h3>
<p>As you can see in the <code>explain</code> output above, the information to the user is still a bit sparse. In most cases, we'll want to have some information about the input(s) the user is supposed to provide. Same for what the outputs actually mean. In both cases, we can add a <code>doc</code> attribute to each input and output field.</p>
<div class="highlight"><pre><span></span><code>    <span class="o">...</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="nf">create_inputs_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;table_input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;table&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The table to filter.&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">create_outputs_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;table_output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;table&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The filtered table.&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="o">...</span>
    <span class="o">...</span>
</code></pre></div>
<p>Run the <code>explain</code> command again, to check what <em>kiara</em> thinks of our module now:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>operation<span class="w"> </span>explain<span class="w"> </span>filter.table
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Operation: filter.table ──────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   Documentation   Filter a table.                                                                                                        │
│                                                                                                                                          │
│   Inputs                                                                                                                                 │
│                     field name    type    description                                                    Required   Default              │
│                    ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────    │
│                     table_input   table   The table to filter.                                           yes        -- no default --     │
│                                                                                                                                          │
│                                                                                                                                          │
│   Outputs                                                                                                                                │
│                     field name     type    description                                                                                   │
│                    ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────    │
│                     table_output   table   The filtered table.                                                                           │
│                                                                                                                                          │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<h3 id="processing-the-inputs">Processing the inputs<a class="headerlink" href="#processing-the-inputs" title="Permanent link">&para;</a></h3>
<p>Specifying the inputs (and outputs) is an important part of designing your module, it's basically the module's 'public API', and you want to avoid changing it (too much; or at all) as your module evolves over time. But of course, the actual processing is where the interesting stuff happens. In <em>kiara</em>, that is the <code>process</code> method of every module. The arguments to this method are called <code>inputs</code> and <code>outputs</code>, which are basically dicts that use the field names specified in the <code>create_inputs_schema</code> / <code>create_outputs_schema</code> as keys, and Python objects of class <a class="autorefs autorefs-external" href="https://dharpa.org/kiara/latest/reference/kiara/models/values/value/#kiara.models.values.value.Value">Value</a> as values.</p>
<p>One thing to understand is that a <code>Value</code> object is not the same as the actual data. Instead, it's a reference to it (a means to retrieve it), and it also contains metadata about its provenance (pedigree/lineage) and other properties.</p>
<p>This is the signature of the <code>process</code> method, including type hints (which we will omit after this):</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">kiara.models.values.value</span> <span class="kn">import</span> <span class="n">ValueMap</span><span class="p">,</span> <span class="n">ValueMapWritable</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">inputs</span><span class="p">:</span> <span class="n">ValueMap</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueMapWritable</span><span class="p">):</span>
        <span class="o">...</span>
        <span class="o">...</span>
</code></pre></div>
<p>The <code>inputs</code> and <code>outputs</code> arguments to the <code>process</code> method are of type <a class="autorefs autorefs-external" href="https://dharpa.org/kiara/latest/reference/kiara/models/values/value/#kiara.models.values.value.ValueMap">ValueMap</a>; the two main methods to access input data are:</p>
<ul>
<li><code>inputs.get_value_obj([field_name])</code>: retrieve the (wrapper) <code>Value</code> object for a field</li>
<li><code>inputs.get_value_data([field_name])</code>: retrieve the data object for a field</li>
</ul>
<p>In addition, you can retrieve the data object via the value wrapper:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">value</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;field_name&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
The class/type of the data depends on the data type of the value, so you'll have to consult the documentation about what to expect. TODO: expand on this, with a bit of example code/cli commands</p>
<p>The important methods to set an output is:</p>
<ul>
<li><code>outputs.set_value(field_name, result_data)</code>: set a single output field</li>
<li><code>outputs.set_values(field_name_1=result_data_1, field_name_2=result_data_2, ...)</code>: set multiple result values at once</li>
</ul>
<p>All that out of the way, let's get started implementing our table filter. We'll do it in stages, so hopefully we can cover all the important aspects in this tutorial in a way that makes intuitive sense.</p>
<p>To that end, let's write some code that does ...nothing. Our first iteration of our module will take the input table, and immediately set it as output:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">):</span>

    <span class="n">table_obj</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;table_input&quot;</span><span class="p">)</span>

    <span class="c1"># some debug output is usually useful while developing. Something like:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Filter module, table input: </span><span class="si">{</span><span class="n">table_obj</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Table data:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">table_obj</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;table_output&quot;</span><span class="p">,</span> <span class="n">table_obj</span><span class="p">)</span>
</code></pre></div>
<p>If we <code>run</code> our module in this state, we should see our debug output, as well as the resulting table (which will be the unmodified input):</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>run<span class="w"> </span>filter.table<span class="w"> </span><span class="nv">table_input</span><span class="o">=</span>alias:journal_nodes_table
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>Filter module, table input value: Value(id=b2948129-2aa5-4e49-af0e-8ca9b79427a7, type=table, status=set, initialized=True optional=False)
Table data instance: KiaraTable(model_id=-- n/a --, category=kiara_table, fields=[data_path])

╭─ Result ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   field          data_type   value                                                                                                       │
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │
│   table_output   table                                                                                                                   │
│                                Id    Label        JournalTyp   City        CountryNe   PresentDay   Latitude    Longitude   Language     │
│                               ───────────────────────────────────────────────────────────────────────────────────────────────────────    │
│                                75    Psychiatri   specialize   Amsterdam   Netherlan   Netherland   52.366667   4.9         Dutch        │
│                                36    The Americ   specialize   Baltimore   United St   United Sta   39.289444   -76.61527   English      │
│                                208   The Americ   specialize   Baltimore   United St   United Sta   39.289444   -76.61527   English      │
│                                295   Die Kranke   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                296   Die deutsc   general me   Berlin      German Em   Germany      52.52       13.405      German       │
│                                300   Therapeuti   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                1     Allgemeine   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                7     Archiv für   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                10    Berliner k   general me   Berlin      German Em   Germany      52.52       13.405      German       │
│                                13    Charité An   general me   Berlin      German Em   Germany      52.52       13.405      German       │
│                                21    Monatsschr   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                29    Virchows A   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                31    Zeitschrif   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                42    Vierteljah   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                47    Centralbla   specialize   Berlin      German Em   Germany      52.52       13.405      German       │
│                                50    Russische    general me   Berlin      German Em   Germany      52.52       13.405      German       │
│                                ...   ...          ...          ...         ...         ...          ...         ...         ...          │
│                                ...   ...          ...          ...         ...         ...          ...         ...         ...          │
│                                277   L&#39;arte med   general me   Turin       Italy       Italy        45.079167   7.676111    Italian      │
│                                288   Allgemeine   specialize   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                18    Jahrbücher   specialize   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                30    Wiener kli   general me   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                44    Wiener kli   general me   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                45    Wiener med   general me   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                72    Wiener med   general me   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                81    Monatsschr   general me   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                93    Klinisch-t   general me   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                151   Medicinisc   specialize   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                199   Der Militä   specialize   Vienna      Austro-Hu   Austria      48.2        16.366667   German       │
│                                261   Медицинска   general me   Voronezh    Russian E   Russia       51.671667   39.210556   Russian      │
│                                77    Medycyna     general me   Warsaw      Russian E   Poland       52.233333   21.016667   Polish       │
│                                150   Kronika Le   general me   Warsaw      Russian E   Poland       52.233333   21.016667   Polish       │
│                                86    Grenzfrage   specialize   Wiesbaden   German Em   Germany      50.0825     8.24        German       │
│                                206   Ergebnisse   specialize   Wiesbaden   German Em   Germany      50.0825     8.24        German       │
│                                                                                                                                          │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>Now it's time to drill a bit deeper into our input table, and figure out how to access the information it contains. <em>kiara</em> wraps data that shares some schema/structure into so-called 'data types'. You can access a list of the data types that are available in your current <em>kiara</em> environment with the <code>data-type list</code> sub-command:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>data-type<span class="w"> </span>list
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Available data types ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   type name      type lineage   (qualifier) profiles   description                                                                       │
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │
│   any            -- n/a --      -- n/a --              &#39;Any&#39; type, the parent type for most other types.                                 │
│                                                                                                                                          │
│   array          -- n/a --      -- n/a --              An array, in most cases used as a column within a table.                          │
│                                                                                                                                          │
│   boolean        -- n/a --      -- n/a --              A boolean.                                                                        │
│                                                                                                                                          │
│   bytes          -- n/a --      -- n/a --              An array of bytes.                                                                │
│                                                                                                                                          │
│   database       -- n/a --      -- n/a --              A database, containing one or several tables.                                     │
│                                                                                                                                          │
│   date           -- n/a --      -- n/a --              A date.                                                                           │
│                                                                                                                                          │
│   dict           -- n/a --      -- n/a --              A dictionary.                                                                     │
│                                                                                                                                          │
│   file           -- n/a --      -- n/a --              A file.                                                                           │
│                                                                                                                                          │
│   file_bundle    -- n/a --      -- n/a --              A bundle of files (like a folder, zip archive, etc.).                             │
│                                                                                                                                          │
│   float          -- n/a --      -- n/a --              A float.                                                                          │
│                                                                                                                                          │
│   integer        -- n/a --      -- n/a --              An integer.                                                                       │
│                                                                                                                                          │
│   list           -- n/a --      -- n/a --              A list.                                                                           │
│                                                                                                                                          │
│   network_data   -- n/a --      -- n/a --              Data that can be assembled into a graph.                                          │
│                                                                                                                                          │
│   string         -- n/a --      -- n/a --              A string.                                                                         │
│                                                                                                                                          │
│   table          -- n/a --      -- n/a --              Tabular data (table, spreadsheet, data_frame, what have you).                     │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>To find out more about a specific data type, you can use <code>data-type explain</code>:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>data-type<span class="w"> </span>explain<span class="w"> </span>table
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Data type: table ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   type_name     table                                                                                                                    │
│   type_config   {}                                                                                                                       │
│                                                                                                                                          │
│ ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── │
│                                                                                                                                          │
│  lineage              table                                                                                                              │
│                       any                                                                                                                │
│  qualifier profile(s) -- n/a --                                                                                                          │
│  Documentation                                                                                                                           │
│                         Tabular data (table, spreadsheet, data_frame, what have you).                                                    │
│                                                                                                                                          │
│                         The table data is organized in sets of columns (arrays of data of the same type), with each column having a      │
│                         string identifier.                                                                                               │
│                                                                                                                                          │
│                         kiara uses an instance of the [KiaraTable][kiara_plugin.tabular.models.table.KiaraTable] class to manage the     │
│                         table data, which let&#39;s developers access it in different formats (Apache Arrow Table, Pandas dataframe,         │
│                         Python dict of lists, more to follow...).                                                                        │
│                                                                                                                                          │
│                         Please consult the API doc of the KiaraTable class for more information about how to access and query the        │
│                         data:                                                                                                            │
│                                                                                                                                          │
│                          • KiaraTable API doc                                                                                            │
│                                                                                                                                          │
│                         Internally, the data is stored in Apache Feather format -- both in memory and on disk when saved, which          │
│                         enables some advanced usage to preserve memory and compute overhead.                                             │
│                                                                                                                                          │
│  Author(s)                                                                                                                               │
│                         Markus Binsteiner   markus@frkl.io                                                                               │
│                                                                                                                                          │
│  Context                                                                                                                                 │
│                         Tags         tabular                                                                                             │
│                         Labels       package: kiara_plugin.tabular                                                                       │
│                         References   source_repo: https://github.com/DHARPA-Project/kiara_plugin.tabular                                 │
│                                      documentation: https://DHARPA-Project.github.io/kiara_plugin.tabular/                               │
│                                                                                                                                          │
│  Python class                                                                                                                            │
│                         python_class_name    TableType                                                                                   │
│                         python_module_name   kiara_plugin.tabular.data_types.table                                                       │
│                         full_name            kiara_plugin.tabular.data_types.table.TableType                                             │
│                                                                                                                                          │
│  Config class                                                                                                                            │
│                         python_class_name    DataTypeConfig                                                                              │
│                         python_module_name   kiara.data_types                                                                            │
│                         full_name            kiara.data_types.DataTypeConfig                                                             │
│                                                                                                                                          │
│  Value class                                                                                                                             │
│                         python_class_name    KiaraTable                                                                                  │
│                         python_module_name   kiara_plugin.tabular.models.table                                                           │
│                         full_name            kiara_plugin.tabular.models.table.KiaraTable                                                │
│                                                                                                                                          │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>Reading this, and following some of the links included. shows us that we can retrieve the table data as a Pandas dataframe using the <code>to_pandas()</code> method. As the documentation states, this loads the whole data into memory, which is something we should try to avoid, but in a lot of cases (esp. if we are dealing with sub-hundreds-of-megabytes-sized data) it's a perfectly acceptable approach. So, let's do this and use our existing knowledge of Pandas, and retrieve a list of column names from the table the user provided, print out that information debug-style, using print:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="n">table_obj</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;table_input&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Filter module, table input value: </span><span class="si">{</span><span class="n">table_obj</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table data instance: </span><span class="si">{</span><span class="n">table_obj</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">pandas_df</span> <span class="o">=</span> <span class="n">table_obj</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column names: </span><span class="si">{</span><span class="n">pandas_df</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;table_output&quot;</span><span class="p">,</span> <span class="n">table_obj</span><span class="p">)</span>
</code></pre></div>
<p>Again, let's run and see what's what (this time surpressing the result output we don't need right now, using <code>--output silent</code>):</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>run<span class="w"> </span>--output<span class="w"> </span>silent<span class="w"> </span>filter.table<span class="w"> </span><span class="nv">table_input</span><span class="o">=</span>alias:journal_nodes_table
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>Filter module, table input value: Value(id=b2948129-2aa5-4e49-af0e-8ca9b79427a7, type=table, status=set, initialized=True optional=False)
Table data instance: KiaraTable(model_id=-- n/a --, category=kiara_table, fields=[data_path])
Column names: Index([&#39;Id&#39;, &#39;Label&#39;, &#39;JournalType&#39;, &#39;City&#39;, &#39;CountryNetworkTime&#39;,
       &#39;PresentDayCountry&#39;, &#39;Latitude&#39;, &#39;Longitude&#39;, &#39;Language&#39;],
      dtype=&#39;object&#39;)
</code></pre></div>

</div>

<p>Ok, now we filter. Initially, let's say our module accepts only tables that contain a 'City' column, and returns all rows that have 'Berlin' as a value there:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="kn">from</span> <span class="nn">kiara.exceptions</span> <span class="kn">import</span> <span class="n">KiaraProcessingException</span>

    <span class="n">table_obj</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;table_input&quot;</span><span class="p">)</span>
    <span class="n">pandas_df</span> <span class="o">=</span> <span class="n">table_obj</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>

    <span class="n">column_names</span> <span class="o">=</span> <span class="n">pandas_df</span><span class="o">.</span><span class="n">columns</span>
    <span class="k">if</span> <span class="s2">&quot;City&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">column_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="s2">&quot;Invalid table, does not contain a column named &#39;City&#39;.&quot;</span><span class="p">)</span>

    <span class="n">berlin_df</span> <span class="o">=</span> <span class="n">pandas_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pandas_df</span><span class="p">[</span><span class="s1">&#39;City&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Berlin&quot;</span><span class="p">]</span>
    <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;table_output&quot;</span><span class="p">,</span> <span class="n">berlin_df</span><span class="p">)</span>
</code></pre></div>
<p>And again, we run our module using our example dataset, and now we actually get something that is filtered:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>run<span class="w"> </span>filter.table<span class="w"> </span><span class="nv">table_input</span><span class="o">=</span>alias:journal_nodes_table
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Result ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   field          data_type   value                                                                                                       │
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │
│   table_output   table                                                                                                                   │
│                                Id    Label      JournalT   City     CountryN   PresentD   Latitude   Longitude   Language   __index_     │
│                               ───────────────────────────────────────────────────────────────────────────────────────────────────────    │
│                                295   Die Kran   speciali   Berlin   German E   Germany    52.52      13.405      German     3            │
│                                296   Die deut   general    Berlin   German E   Germany    52.52      13.405      German     4            │
│                                300   Therapeu   speciali   Berlin   German E   Germany    52.52      13.405      German     5            │
│                                1     Allgemei   speciali   Berlin   German E   Germany    52.52      13.405      German     6            │
│                                7     Archiv f   speciali   Berlin   German E   Germany    52.52      13.405      German     7            │
│                                10    Berliner   general    Berlin   German E   Germany    52.52      13.405      German     8            │
│                                13    Charité    general    Berlin   German E   Germany    52.52      13.405      German     9            │
│                                21    Monatssc   speciali   Berlin   German E   Germany    52.52      13.405      German     10           │
│                                29    Virchows   speciali   Berlin   German E   Germany    52.52      13.405      German     11           │
│                                31    Zeitschr   speciali   Berlin   German E   Germany    52.52      13.405      German     12           │
│                                42    Viertelj   speciali   Berlin   German E   Germany    52.52      13.405      German     13           │
│                                47    Centralb   speciali   Berlin   German E   Germany    52.52      13.405      German     14           │
│                                50    Russisch   general    Berlin   German E   Germany    52.52      13.405      German     15           │
│                                76    Deutsche   general    Berlin   German E   Germany    52.52      13.405      German     16           │
│                                87    Monatssc   speciali   Berlin   German E   Germany    52.52      13.405      German     17           │
│                                108   Archiv f   speciali   Berlin   German E   Germany    52.52      13.405      German     18           │
│                                113   Zeitschr   general    Berlin   German E   Germany    52.52      13.405      German     19           │
│                                159   Deutsche   speciali   Berlin   German E   Germany    52.52      13.405      German     20           │
│                                162   Jahresbe   speciali   Berlin   German E   Germany    52.52      13.405      German     21           │
│                                192   Ärztlich   general    Berlin   German E   Germany    52.52      13.405      German     22           │
│                                198   Zeitschr   speciali   Berlin   German E   Germany    52.52      13.405      German     23           │
│                                258   Der Pfar   news med   Berlin   German E   Germany    52.52      13.405      German     24           │
│                                                                                                                                          │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>Of course, a module like this is only of very limited value, because the tables it accepts as inputs must contain a column named 'City', and it only filters out a hardcoded string. Ideally, we'd want the user to provide both inputs, along with the table to filter. Let's add those module inputs, and adjust the processing method accordingly:</p>
<div class="highlight"><pre><span></span><code>    <span class="k">def</span> <span class="nf">create_inputs_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;table_input&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;table&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The table to filter.&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;column_name&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The column containing the element to use as filter.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;City&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;filter_string&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The string to use as filter.&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.exceptions</span> <span class="kn">import</span> <span class="n">KiaraProcessingException</span>

        <span class="n">table_obj</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;table_input&quot;</span><span class="p">)</span>
        <span class="n">column_name</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;column_name&quot;</span><span class="p">)</span>
        <span class="n">filter_string</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;filter_string&quot;</span><span class="p">)</span>

        <span class="n">pandas_df</span> <span class="o">=</span> <span class="n">table_obj</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>

        <span class="n">column_names</span> <span class="o">=</span> <span class="n">pandas_df</span><span class="o">.</span><span class="n">columns</span>
        <span class="k">if</span> <span class="n">column_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">column_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid table, does not contain a column named &#39;</span><span class="si">{</span><span class="n">column_name</span><span class="si">}</span><span class="s2">&#39;. Available column names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">column_names</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

        <span class="n">berlin_df</span> <span class="o">=</span> <span class="n">pandas_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pandas_df</span><span class="p">[</span><span class="n">column_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">filter_string</span><span class="p">]</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;table_output&quot;</span><span class="p">,</span> <span class="n">berlin_df</span><span class="p">)</span>
</code></pre></div>
<p>In this example, I've used a default value for the <code>column_name</code> input ('City'). This probably doesn't make a whole lot of sense, but it shows how to set defaults for input fields, which in a lot of cases does make sense. We can try to run this command using a missing <code>filter_string</code> argument, which shows off nicely what the <em>kiara</em> command-line interface has to say about something like this:</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>run<span class="w"> </span>filter.table<span class="w"> </span><span class="nv">table_input</span><span class="o">=</span>alias:journal_nodes_table
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Run info: filter.table ───────────────────────────────────────────────────╮
│                                                                              │
│ Can&#39;t run operation, invalid or insufficient inputs.                         │
│                                                                              │
│ ──────────────────────────────────────────────────────────────────────────── │
│                                                                              │
│ Operation: filter.table                                                    │
│                                                                              │
│ Filter a table.                                                              │
│                                                                              │
│ Inputs:                                                                      │
│                                                                              │
│   field name      status    type     description        required   default   │
│  ──────────────────────────────────────────────────────────────────────────  │
│   column_name     valid     string   The column         no         City      │
│                                      containing the                          │
│                                      element to use                          │
│                                      as filter.                              │
│   filter_string   not set   string   The string to      yes                  │
│                                      use as filter.                          │
│   table_input     valid     table    The table to       yes                  │
│                                      filter.                                 │
│                                                                              │
│                                                                              │
│ Outputs:                                                                     │
│                                                                              │
│   field name     type    description                                         │
│  ──────────────────────────────────────────────────────────────────────────  │
│   table_output   table   The filtered table.                                 │
│                                                                              │
╰──────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>As you can see, <em>kiara</em> complains about the missing input, but has used 'City' as default for the missing <code>column_name</code> input, and therefor is ok with the user not providing this. Ok, one more time, let's look for 'Amsterdam':</p>
<div class="highlight"><pre><span></span><code>kiara<span class="w"> </span>run<span class="w"> </span>filter.table<span class="w"> </span><span class="nv">table_input</span><span class="o">=</span>alias:journal_nodes_table<span class="w"> </span><span class="nv">filter_string</span><span class="o">=</span>Amsterdam
</code></pre></div>
<div style='max-height:200px;overflow:auto'>
<div class="highlight"><pre><span></span><code>╭─ Result ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                                                          │
│   field          data_type   value                                                                                                       │
│  ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  │
│   table_output   table                                                                                                                   │
│                                Id   Label      JournalT   City       CountryN   PresentD   Latitude   Longitud   Language   __index_     │
│                               ───────────────────────────────────────────────────────────────────────────────────────────────────────    │
│                                75   Psychiat   speciali   Amsterda   Netherla   Netherla   52.36666   4.9        Dutch      0            │
│                                                                                                                                          │
│                                                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</code></pre></div>

</div>

<p>This should give you a good basis to work on your own <em>kiara</em> module(s). Stay tuned for part II of this tutorial!</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking"], "search": "../../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>